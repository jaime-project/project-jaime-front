<app-title title="Storage"></app-title>


<app-card>
  <div class="row">
    <div class="col-3">
      <label i18n><b>Filter:</b></label>
      <input type="text" class="form-control" [(ngModel)]="filterBy" (change)="filterFunction()">
    </div>
  </div>
</app-card>


<div class="card m-t-30">
  <div class="card-body">
    <button class="btn btn-info" i18n><b>+ </b><i class="fa fa-folder"></i></button>
    <button class="btn btn-info" i18n><b>+ </b><i class="fa fa-file"></i></button>
    <button class="btn btn-success" (click)="reloadCurrentPath()" i18n><i class="fas fa-refresh"></i></button>
    <button class="btn btn-warning" (click)="backCurrentPath()" i18n><i class="fa fa-arrow-left"></i></button>
  </div>
</div>


<app-card>

  <div class="col-lg-12">
    <div class="row text-center text-lg-start">

      <div class="col-lg-1" *ngFor="let dir of fileList!.dirs">
        <div class="m-t-30" style="border-bottom-width: 10px;">
          <div>
            <a class="d-block h-100" (click)="changeCurrentPath(dir)">
              <div class="d-flex justify-content-center">
                <i class="fa fa-folder fa-3x" style="margin-bottom: 5%;margin-top: 5%;"></i>
              </div>
              <div class="d-flex justify-content-center text-center">
                <h6><b>{{dir}}</b></h6>
              </div>
            </a>
          </div>

          <div ngbDropdown class="d-flex justify-content-center">
            <button type="button" class="btn btn-options" id="dropdownFiles" ngbDropdownToggle>
              <i class="fa fa-ellipsis-v"></i>
            </button>
            <div ngbDropdownMenu aria-labelledby="dropdownFiles">
              <button type="button" class="btn btn-primary" routerLink="/storage/{{dir}}/details" data-toggle="tooltip"
                title="Detail">
                <i class="fas fa-eye"></i></button>
              <button type="button" class="btn btn-danger" (click)="deleteFileOrDir(dir)" data-toggle="tooltip"
                title="Delete">
                <i class="far fa-trash-alt"></i></button>
            </div>
          </div>

        </div>
      </div>

      <div class="col-lg-1" *ngFor="let file of fileList!.files">

        <div class="m-t-30" style="border-bottom-width: 10px;">
          <div>
            <a class="d-block h-100">
              <div class="d-flex justify-content-center">
                <i class="fa fa-file fa-3x" style="margin-bottom: 5%;margin-top: 5%;"></i>
              </div>
              <div class="d-flex justify-content-center text-center">
                <h6><b>{{file}}</b></h6>
              </div>
            </a>
          </div>

          <div ngbDropdown class="d-flex justify-content-center">
            <button type="button" class="btn btn-options" id="dropdownDirs" ngbDropdownToggle>
              <i class="fa fa-ellipsis-v"></i>
            </button>
            <div ngbDropdownMenu aria-labelledby="dropdownDirs">
              <button type="button" class="btn btn-primary" routerLink="/storage/{{file}}/details" data-toggle="tooltip"
                title="Detail">
                <i class="fas fa-eye"></i></button>
              <button type="button" class="btn btn-danger" (click)="deleteFileOrDir(file)" data-toggle="tooltip"
                title="Delete">
                <i class="far fa-trash-alt"></i></button>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>

</app-card>


<app-spinner *ngIf="pageLoading"></app-spinner>