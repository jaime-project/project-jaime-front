<app-title title="Cards List"></app-title>


<app-card>
  <button class="btn btn-success" routerLink="/cards/new" style="margin-right: 2%;">New Card</button>
</app-card>

<div class="row">
  <div class="col-sm-3" *ngFor="let cardShort of cardsShort">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">{{cardShort.title}}</h4>
        <p class="card-text">{{cardShort.body}}</p>
        <p class="card-text"><b>Repo:</b> {{cardShort.repo}}</p>
        <p class="card-text"><b>Mudule:</b> {{cardShort.module}}</p>
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <button class="btn btn-success me-md-2" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal"
            (click)="currentCardToRun(cardShort.id)"><i class="fas fa-play"></i></button>
          <button class="btn btn-primary me-md-2" type="button" (click)="detailCard(cardShort.id)"><i
              class="fas fa-eye"></i></button>
          <button class="btn btn-danger me-md-2" type="button" (click)="deleteCard(cardShort.id)"><i
              class="fas fa-trash-alt"></i></button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade modal-lg" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Params</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ngx-monaco-editor style="width: 100%; height: 500px;"
          [options]="{ automaticLayout: true, theme: 'vs-dark', language: 'yaml', readOnly: false }"
          [(ngModel)]="cardParams">
        </ngx-monaco-editor>
        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <button type="submit" class="btn btn-success" (click)="runCard()" i18n>Run</button>
        </div>
      </div>
    </div>
  </div>
</div>

<app-spinner *ngIf="pageLoading"></app-spinner>